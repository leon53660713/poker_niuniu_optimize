# **妞妞 (NiuNiu) 模擬與 EV 計算工具 🎲**

本專案提供 **妞妞遊戲的模擬與 EV（期望值）計算工具**，包括：  
✅ **模擬莊家已經成牌的情況**  
✅ **模擬莊家尚未成牌的勝率**  
✅ **計算玩家與莊家對戰時的 EV**  
✅ **測試不同下注倍數的最佳策略**  

---

## 📖 **遊戲規則簡介**
- **發牌**：每位玩家初始獲得 **4 張牌**。  
- **搶莊**：決定是否搶當莊家。  
- **補牌**：所有玩家獲得 **第 5 張牌**，並組成最優牌型。  
- **牌型計算**：  
  - 後 **3 張數字總和為 10 的倍數**，則稱為「牛」。  
  - 剩下 **2 張相加後 mod 10**，決定點數大小（例如：7 代表「牛7」）。  
- **勝負比較**：  
  1. 先比 **牌型等級**（如「五小牛」>「五公牛」>「牛牛」>「牛9」…）。  
  2. 若相同，比較 **最大數字的牌**，數字相同比 **花色大小**。  
  3. 根據結果 **計算賠率**，通常範圍為 **1 到 6 倍**。  

---

## 🚀 **功能介紹**

### 1️⃣ **給定 4 張牌會返回組成不同牌型的機率**
📌 **函式**：`simulate_cardtype_rate(hand, num_simulations=500000)`  
📌 **功能**：給定 4 張牌可以提供玩家組成不同牌型的機率  

### 2️⃣ **計算搶莊家的倍率問題(是否需要搶莊家)**
📌 **函式**：`simulate_ev(player_hand, num_simulations=500000)`  
📌 **功能**：幫助玩家決策是否搶莊家，以及要搶幾倍的莊家

### 3️⃣ **模擬莊家是否成牌對上玩家的情況**
📌 **函式**：`calculate_ev_against_banker(player_hand, num_simulations=500000, have_niu=True/False)`  
📌 **功能**：當莊家(已經/尚未)成牌時，計算玩家的 **EV（期望值）**，幫助判斷最佳下注策略。   


